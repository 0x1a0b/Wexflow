function Wexflow(t,e){function n(t,e){for(;t.charAt(t.length-1)==e;)t=t.substring(0,t.length-1);return t}function s(t,e){return t.Id<e.Id?-1:t.Id>e.Id?1:0}function i(t){switch(t){case 0:return"Startup";case 1:return"Trigger";case 2:return"Periodic";default:return""}}function a(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState||200==this.status){var t=JSON.parse(this.responseText);e(t)}},n.open("GET",t,!0),n.send()}function d(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&e()},n.open("POST",t,!0),n.send()}e=n(e,"/");var o=-1,u={},r=null,l=500,c="<div id='wf-container'><div id='wf-cmd'><button id='wf-start' type='button'>Start</button><button id='wf-pause' type='button'>Suspend</button><button id='wf-resume' type='button'>Resume</button><button id='wf-stop' type='button'>Stop</button></div><div id='wf-notifier'><input id='wf-notifier-text' type='text' name='fname' readonly></div><div id='wf-workflows'></div></div>";document.getElementById(t).innerHTML=c,a(e+"/workflows",function(t){function n(t,n){a(e+"/workflow/"+t,function(t){n(t)})}function c(t){document.getElementById("wf-notifier-text").value=t}function f(t,e){n(t,function(t){if(t.IsEnabled===!1)c("This workflow is disabled."),I(E,!0),I(k,!0),I(T,!0),I(B,!0);else{if(e===!1&&w(t)===!1)return;I(E,t.IsRunning),I(B,!(t.IsRunning&&!t.IsPaused)),I(k,!(t.IsRunning&&!t.IsPaused)),I(T,!t.IsPaused),c(t.IsRunning===!0&&t.IsPaused===!1?"This workflow is running...":t.IsPaused===!0?"This workflow is paused.":"")}})}function w(t){var e=u[t.Id].IsRunning!==t.IsRunning||u[t.Id].IsPaused!==t.IsPaused;return u[t.Id].IsRunning=t.IsRunning,u[t.Id].IsPaused=t.IsPaused,e}function I(t,e){t.disabled=e}t.sort(s);var m,h=[];for(m=0;m<t.length;m++){var g=t[m];u[g.Id]=g;var p=i(g.LaunchType);h.push("<tr><td class='wf-id' title='"+g.Id+"'>"+g.Id+"</td><td class='wf-n' title='"+g.Name+"'>"+g.Name+"</td><td class='wf-lt'>"+p+"</td><td class='wf-e'><input type='checkbox' readonly disabled "+(g.IsEnabled?"checked":"")+"></input></td><td class='wf-d' title='"+g.Description+"'>"+g.Description+"</td></tr>")}var y="<table id='wf-workflows-table' class='table table-striped'><thead><tr><th class='wf-id'>Id</th><th class='wf-n'>Name</th><th class='wf-lt'>LaunchType</th><th class='wf-e'>Enabled</th><th class='wf-d'>Description</th></tr></thead><tbody>"+h.join("")+"</tbody></table>";document.getElementById("wf-workflows").innerHTML=y;var b=document.getElementById("wf-workflows-table"),v=document.getElementsByClassName("wf-d");for(m=0;m<v.length;m++)v[m].style.width=b.offsetWidth-517+"px";var E=document.getElementById("wf-start"),k=document.getElementById("wf-pause"),T=document.getElementById("wf-resume"),B=document.getElementById("wf-stop"),N=b.getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(m=0;m<N.length;m++)N[m].onclick=function(){o=parseInt(this.getElementsByClassName("wf-id")[0].innerHTML);var t=document.getElementsByClassName("selected");t.length>0&&(t[0].className=t[0].className.replace("selected","")),this.className+="selected",u[o].IsEnabled===!0?(clearInterval(r),r=setInterval(function(){f(o,!1)},l),f(o,!0)):f(o,!0)};I(E,!0),E.onclick=function(){var t=e+"/start/"+o;d(t)},I(k,!0),k.onclick=function(){var t=e+"/suspend/"+o;d(t,function(){f(o,!0)})},I(T,!0),T.onclick=function(){var t=e+"/resume/"+o;d(t,function(){})},I(B,!0),B.onclick=function(){var t=e+"/stop/"+o;d(t,function(){f(o,!0)})}})}
function WexflowDesigner(t,e){"use strict";function n(t,e){for(;t.charAt(t.length-1)===e;)t=t.substring(0,t.length-1);return t}function d(t){return t.replace(/[<>&'"]/g,function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}return t})}function s(t,e){return t.Id<e.Id?-1:t.Id>e.Id?1:0}function a(t){switch(t){case 0:return"startup";case 1:return"trigger";case 2:return"periodic";default:return""}}function l(t,e){for(var n=0;n<t.options.length;n++)if(t.options[n].value===e)return void(t.options[n].selected=!0)}function i(t,e,n){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===this.readyState&&200===this.status&&e){var t=JSON.parse(this.responseText);e(t)}},d.onerror=function(){n&&n()},d.open("GET",t,!0),d.send()}hljs.initHighlightingOnLoad(),e=n(e,"/");var r=-1,o={},c=null,u=500,f="<div id='wf-container'><div id='wf-workflows'></div><div id='wf-designer-right-panel' style='display: none;'><h3>Workflow <button id= 'wf-xml-button' type= 'button'>XML</button></h3><pre><code id='wf-xml-container' class='xml'></pre><table class='wf-designer-table'><tbody>        <tr><td class='wf-title'>Id</td><td class='wf-value'><input id='wf-id' type='text' readonly /></td></tr>        <tr><td class='wf-title'>Name</td><td class='wf-value'><input id='wf-name' type='text' readonly/></td></tr>        <tr><td class='wf-title'>LaunchType</td><td class='wf-value'><select id='wf-launchType' disabled><option value='startup'>Startup</option><option value='trigger'>Trigger</option><option value='periodic'>Periodic</option></select></td></tr>        <tr><td class='wf-title'>Period</td><td class='wf-value'><input id='wf-period' type='text' readonly/></td></tr>        <tr><td class='wf-title'>Enabled</td><td class='wf-value'><input id='wf-enabled' type='checkbox' readonly disabled /></td></tr>        <tr><td class='wf-title'>Description</td><td class='wf-value'><input id='wf-desc' type='text' readonly/></td></tr>        <tr><td class='wf-title'>Status</td><td id='wf-status' class='wf-value'></td></tr></tbody></table>        <h3>Tasks</h3>        <div id='wf-tasks'>        </div>    </div></div>";document.getElementById(t).innerHTML=f,i(e+"/workflows",function(t){function n(t,n){i(e+"/workflow/"+t,function(t){n(t)})}function f(t,n){i(e+"/tasks/"+t,function(t){n(t)})}function w(t,n){i(e+"/xml/"+t,function(t){n(t)})}function p(t){var e=o[t.Id].IsRunning!==t.IsRunning||o[t.Id].IsPaused!==t.IsPaused;return o[t.Id].IsRunning=t.IsRunning,o[t.Id].IsPaused=t.IsPaused,e}function g(t,e){n(t,function(t){if(t.IsEnabled===!1)y("This workflow is disabled.");else{if(e===!1&&p(t)===!1)return;y(t.IsRunning===!0&&t.IsPaused===!1?"This workflow is running...":t.IsPaused===!0?"This workflow is suspended.":"This workflow is not running.")}})}function y(t){document.getElementById("wf-status").innerHTML=t}t.sort(s);var v,h=[];for(v=0;v<t.length;v++){var m=t[v];o[m.Id]=m,h.push("<tr><td class='wf-id' title='"+m.Id+"'>"+m.Id+"</td><td class='wf-n' title='"+m.Name+"'>"+m.Name+"</td></tr>")}var b="<table id='wf-workflows-table' class='table table-striped'><thead><tr><th class='wf-id'>Id</th><th class='wf-n'>Name</th></tr></thead><tbody>"+h.join("")+"</tbody></table>";document.getElementById("wf-workflows").innerHTML=b;var I=document.getElementById("wf-workflows-table"),k=I.getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(v=0;v<k.length;v++)k[v].onclick=function(){r=parseInt(this.getElementsByClassName("wf-id")[0].innerHTML);var t=document.getElementsByClassName("selected");t.length>0&&(t[0].className=t[0].className.replace("selected","")),this.className+="selected",document.getElementById("wf-designer-right-panel").style.display="block";var e=document.getElementById("wf-xml-container");e.innerHTML="",document.getElementById("wf-xml-button").onclick=function(){w(r,function(t){e.innerHTML=d(t),hljs.highlightBlock(e)})},n(r,function(t){document.getElementById("wf-id").value=t.Id,document.getElementById("wf-name").value=t.Name;var e=a(t.LaunchType);l(document.getElementById("wf-launchType"),e),document.getElementById("wf-period").value=t.Period,document.getElementById("wf-enabled").checked=t.IsEnabled,document.getElementById("wf-desc").value=t.Description,clearInterval(c),t.IsEnabled===!0?(c=setInterval(function(){g(r,!1)},u),g(r,!0)):g(r,!0),f(r,function(t){for(var e="",n=0;n<t.length;n++){var d=t[n];e+="<div id='wf-task'><h5 class='wf-task-title'>Task "+d.Id+"</h5><table class='wf-designer-table'><tbody>        <tr><td class='wf-title'>Id</td><td class='wf-value'><input id='wf-task-id' type='text' value='"+d.Id+"' readonly /></td></tr>        <tr><td class='wf-title'>Name</td><td class='wf-value'><input id='wf-task-name' type='text' value='"+d.Name+"' readonly/></td></tr>        <tr><td class='wf-title'>Description</td><td class='wf-value'><input id='wf-task-desc' type='text' value='"+d.Description+"' readonly/></td></tr>        <tr><td class='wf-title'>Enabled</td><td class='wf-value'><input id='wf-task-enabled' type='checkbox' readonly disabled "+(d.IsEnabled?"checked":"")+" /></td></tr></tbody></table><h6>Settings</h6><table class='wf-designer-table'><tbody>";for(var s=0;s<d.Settings.length;s++){var a=d.Settings[s];if(e+="<tr><td class='wf-title'>"+a.Name+"</td><td class='wf-setting-value'>",""!==a.Value&&(e+="<input type='text' value='"+a.Value+"' readonly />"),a.Attributes.length>0){e+="<table>";for(var l=0;l<a.Attributes.length;l++){var i=a.Attributes[l];e+="<tr><td><input type='text' value='"+i.Name+"' readonly /><td><input type='text' value='"+i.Value+"' readonly /></tr>"}e+="</table>"}e+="</td></tr>"}e+="</tbody></table></div > "}document.getElementById("wf-tasks").innerHTML=e})})}},function(){alert("An error occured while retrieving workflows. Check Wexflow Web Service Uri and check that Wexflow Windows Service is running correctly.")})}